define(["require","exports"],function(r,t){"use amd";function n(r){return u[r]=new Function("item","index","array",r)}function e(r){var t=!r;return function(e,f,i){var o,l=0,s=e&&e.length||0;if(s&&"string"==typeof e&&(e=e.split("")),"string"==typeof f&&(f=u[f]||n(f)),i){for(;l<s;++l)if(o=!f.call(i,e[l],l,e),r^o)return!o}else for(;l<s;++l)if(o=!f(e[l],l,e),r^o)return!o;return t}}function f(r){var n=1,e=0,f=0;return r||(n=e=f=-1),function(i,o,l,u){if(u&&n>0)return t.lastIndexOf(i,o,l);var a,p=i&&i.length||0,c=r?p+f:e;for(l===s?a=r?e:p+f:l<0?(a=p+l,a<0&&(a=e)):a=l>=p?p+f:l,p&&"string"==typeof i&&(i=i.split(""));a!=c;a+=n)if(i[a]==o)return a;return-1}}function i(r,t,e){var f=0,i=r&&r.length||0;if(i&&"string"==typeof r&&(r=r.split("")),"string"==typeof t&&(t=u[t]||n(t)),e)for(;f<i;++f)t.call(e,r[f],f,r);else for(;f<i;++f)t(r[f],f,r)}function o(r,t,e,f){var i=0,o=r&&r.length||0,l=new(f||Array)(o);if(o&&"string"==typeof r&&(r=r.split("")),"string"==typeof t&&(t=u[t]||n(t)),e)for(;i<o;++i)l[i]=t.call(e,r[i],i,r);else for(;i<o;++i)l[i]=t(r[i],i,r);return l}function l(r,t,e){var f,i=0,o=r&&r.length||0,l=[];if(o&&"string"==typeof r&&(r=r.split("")),"string"==typeof t&&(t=u[t]||n(t)),e)for(;i<o;++i)f=r[i],t.call(e,f,i,r)&&l.push(f);else for(;i<o;++i)f=r[i],t(f,i,r)&&l.push(f);return l}var s,u={};t.every=e(!1),t.some=e(!0),t.indexOf=f(!0),t.lastIndexOf=f(!1),t.forEach=i,t.map=o,t.filter=l});